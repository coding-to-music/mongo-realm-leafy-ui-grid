(this.webpackJsonpmongodb_realm_grid=this.webpackJsonpmongodb_realm_grid||[]).push([[0],{260:function(e,n,t){},266:function(e,n){},268:function(e,n){},277:function(e,n){},279:function(e,n){},306:function(e,n){},307:function(e,n){},312:function(e,n){},314:function(e,n){},321:function(e,n){},340:function(e,n){},470:function(e,n,t){"use strict";t.r(n);var r,a,c,o,s,i,u=t(3),l=t.n(u),d=t(100),f=t.n(d),p=(t(260),t(10)),b=t.n(p),g=t(21),h=t(18),m=t(22),j=t(89),v=t(16),O=l.a.createContext(),w=function(){var e=l.a.useContext(O);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmAppProvider />");return e},x=function(e){var n=e.appId,t=e.children,r=l.a.useState(new j.a(n)),a=Object(m.a)(r,2),c=a[0],o=a[1];l.a.useEffect((function(){o(new j.a(n))}),[n]);var s=l.a.useState(c.currentUser),i=Object(m.a)(s,2),u=i[0],d=i[1];function f(){return(f=Object(h.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.b.jwt(n),e.next=3,c.logIn(t);case 3:d(c.currentUser);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.logIn(n);case 2:d(c.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(h.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=c.currentUser)||void 0===n?void 0:n.logOut();case 2:d(c.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=Object(g.a)(Object(g.a)({},c),{},{currentUser:u,logIn:function(e){return p.apply(this,arguments)},logInJwt:function(e){return f.apply(this,arguments)},logOut:function(){return w.apply(this,arguments)}});return Object(v.jsx)(O.Provider,{value:x,children:t})},y=t(128),k=t(481),I=t(55),S=t(241),C=t(69),U=t(164),R=t(108),G=t(5),F=C.a.div(r||(r=Object(I.a)(["\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  background: ",";\n"])),G.a.gray.light2),M=t(250),D=t.n(M);function E(){return Object(v.jsx)(D.a,{size:"15px",margin:"3px",color:G.a.gray.dark2})}var P=function(){var e=w(),n=l.a.useState("philip@eschenbacher.ch"),t=Object(m.a)(n,2),r=t[0],a=t[1],c=l.a.useState("Passw0rd"),o=Object(m.a)(c,2),s=o[0],i=o[1],u=l.a.useState({}),d=Object(m.a)(u,2),f=d[0],p=d[1],O=l.a.useState(!1),x=Object(m.a)(O,2),k=x[0],I=x[1],C=Object(y.b)(),G=C.instance,M=C.accounts,D=function(){var n=Object(h.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return I(!0),p((function(e){return Object(g.a)(Object(g.a)({},e),{},{password:null})})),n.prev=2,n.next=5,e.logIn(j.b.emailPassword(r,s));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(2),T(n.t0,p),I(!1);case 11:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(){return n.apply(this,arguments)}}(),P=function(){var n=Object(h.a)(b.a.mark((function n(){var t;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,G.acquireTokenPopup({scopes:["".concat("ce0096fb-ed00-4e8f-bc85-0ddffffadf6e","/.default")],account:M[0]});case 3:return t=n.sent,n.next=6,JSON.stringify(t.accessToken).slice(1,-1);case 6:return t=n.sent,n.next=9,e.logInJwt(t);case 9:n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0),T(n.t0,p);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}(),T=function(e,n){var t=function(e){var n,t=e.message.split(":"),r=t[t.length-1].trimStart();if(!r)return{status:"",message:""};var a=Object(S.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),c=r.match(a),o=null!==(n=null===c||void 0===c?void 0:c.groups)&&void 0!==n?n:{},s=o.status,i=o.message;return{status:s,message:i}}(e),r=t.status,a=t.message||r;switch(console.log(a),a){case"invalid username":n((function(e){return Object(g.a)(Object(g.a)({},e),{},{email:"Invalid email address"})}));break;case"invalid username/password":case"invalid password":case"401":n((function(e){return Object(g.a)(Object(g.a)({},e),{},{password:"Incorrect password"})}))}};return Object(v.jsx)(F,{children:k?Object(v.jsx)(E,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z,{children:Object(v.jsx)(q,{children:"Please identify"})}),Object(v.jsx)(z,{children:Object(v.jsx)(U.a,{type:"email",label:"Email",value:r,onChange:function(e){return a(e.target.value)},errorMessage:f.email,state:f.email?"error":"none"})}),Object(v.jsx)(z,{children:Object(v.jsx)(U.a,{type:"password",label:"Password",value:s,onChange:function(e){return i(e.target.value)},errorMessage:f.password,state:f.password?"error":"none"})}),Object(v.jsx)(z,{children:Object(v.jsx)(R.a,{variant:"primary",onClick:function(){return D()},children:"Login"})}),Object(v.jsx)(z,{children:Object(v.jsx)(R.a,{variant:"primary",onClick:function(){return P()},children:"SSO"})})]})})};var T,q=C.a.h1(a||(a=Object(I.a)(["\n  margin: 0;\n  font-size: 32px;\n"]))),z=C.a.div(c||(c=Object(I.a)(["\n  margin-bottom: 16px;\n"]))),A=(C.a.div(o||(o=Object(I.a)(["\n  margin-top: 8px;\n  font-size: 12px;\n  display: flex;\n  justify-content: center;\n"]))),C.a.span(s||(s=Object(I.a)(["\n  line-height: 18px;\n"]))),C.a.button(i||(i=Object(I.a)(["\n  background: none;\n  border: none;\n  font-size: 12px;\n  color: ",";\n"])),G.a.green.dark2),t(251)),N=(t(467),t(468),t(469),{columnTypes:{detail:{enableRowGroup:!1,enablePivot:!1},dimension:{enableRowGroup:!0,enablePivot:!0},valueColumn:{aggFunc:"sum"}},defaultColDef:{sortable:!0,resizable:!0},rowSelection:"single",rowModelType:"serverSide",serverSideStoreType:"partial",cacheBlockSize:100,rowGroupPanelShow:"always",groupDisplayType:"multipleColumns",onSortChanged:function(e){e.api.refreshServerSideStore({purge:!0})}}),J=t(473),L=function(e){return function(n){return Object(v.jsx)(J.a,{children:function(t){return Object(v.jsx)(e,Object(g.a)({client:t},n))}})}},_=t(484),B=function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e.value)},K=L((function(e){var n,t=e.client,r=w(),a=[{field:"customer",colId:"customerId",valueGetter:"data.customerId",type:"dimension",rowGroup:!0,hide:!0},{field:"lastName",type:"detail"},{field:"firstName",type:"detail"},{field:"age",type:"dimension"},{field:"country",colId:"address.country",type:"dimension",valueGetter:"data.address.country"},{field:"segment",colId:"crmInformation.segmentation",type:"dimension",valueGetter:"data.crmInformation.segmentation"},{field:"account",colId:"accounts.number",valueGetter:"data.accounts.number"},{field:"balance",colId:"accounts.balance",valueGetter:"data.accounts.balance",valueFormatter:B,type:"valueColumn",cellClassRules:{"rag-red":function(e){return e.value<=0},"rag-green":function(e){return e.value>0}}}],c=Object.assign(N,{columnDefs:a}),o=function(e){var n=e.client;return{getRows:function(e){console.log(e);var t=e.request,r=t.startRow,a=t.endRow,c=t.rowGroupCols,o=t.groupKeys,s=t.valueCols,i=t.sortModel;i.map((function(e){return e.sort=e.sort.toUpperCase()}));var u={query:Object(_.a)(T||(T=Object(I.a)(["\n                    query getGridData($queryModelInput:GridQueryModel) {\n                        getGridData(input: $queryModelInput) {\n                            lastRow\n                            rows {\n                                ","\n                            }\n                        }\n                    }\n                }\n                "])),c.length>0&&c.length===o.length?"\n            accounts {\n                number\n                balance\n            ":"\n            customerId\n            lastName\n            firstName\n            age\n            address {\n                country\n            }\n            crmInformation {\n                segmentation\n            }\n            accounts {\n                number\n                balance\n            "),variables:{queryModelInput:{startRow:r,endRow:a,rowGroupCols:c,groupKeys:o,valueCols:s,sortModel:i}}};n.query(u).then((function(e){return e.data.getGridData})).then((function(n){var t=n.lastRow,r=n.rows;e.successCallback(r,t)})).catch((function(n){console.error(n),e.failCallback()}))}}}({client:t}),s=l.a.useState(0),i=Object(m.a)(s,2),u=i[0],d=i[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{style:{height:"calc(100vh - 250px)"},className:"ag-theme-alpine",children:Object(v.jsx)(A.AgGridReact,{gridOptions:c,onGridReady:function(e){e.api.sizeColumnsToFit(),e.api.setServerSideDatasource(o)},onModelUpdated:function(e){d(e.api.getDisplayedRowCount())}})}),Object(v.jsx)("h4",{children:"Total Results: ".concat((n=u,new Intl.NumberFormat("de-DE").format(n)))}),Object(v.jsxs)("h4",{children:["User: ",r.currentUser.id?"".concat(r.currentUser.id," (").concat(r.currentUser.providerType,")"):"not logged in"]}),Object(v.jsx)(R.a,{variant:"primary",onClick:function(){return r.logOut()},children:"Logout"})]})})),Q=t(123),W={auth:{clientId:"ce0096fb-ed00-4e8f-bc85-0ddffffadf6e",authority:"https://login.microsoftonline.com/".concat("6fbb76cd-297f-4298-a09f-bf1180c8f291"),redirectUri:"https://mybankgridview-ahggo.mongodbstitch.com/",postLogoutRedirectUri:"https://mybankgridview-ahggo.mongodbstitch.com/",mainWindowRedirectUri:"https://mybankgridview-ahggo.mongodbstitch.com/"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:function(e,n,t){if(!t)switch(e){case Q.a.Error:return void console.error(n);case Q.a.Info:return void console.info(n);case Q.a.Verbose:return void console.debug(n);case Q.a.Warning:return void console.warn(n)}}}}},$=t(483),V=t(485),Y=t(482),H=t(480),X=function(e){var n=new $.a({uri:"https://eu-central-1.aws.realm.mongodb.com/api/client/v2.0/app/".concat(e.id,"/graphql"),fetch:function(e){function n(n,t){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}(function(){var n=Object(h.a)(b.a.mark((function n(t,r){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.currentUser){n.next=2;break}throw new Error("Must be logged in to use the GraphQL API");case 2:return n.next=4,e.currentUser.refreshCustomData();case 4:return console.log(e.currentUser),r.headers.Authorization="Bearer ".concat(e.currentUser.accessToken),n.abrupt("return",fetch(t,r));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}),t=new V.a;return new Y.a({link:n,cache:t})},Z=function(e){var n=e.children,t=w(),r=l.a.useState(X(t)),a=Object(m.a)(r,2),c=a[0],o=a[1];return l.a.useEffect((function(){o(X(t))}),[t]),Object(v.jsx)(H.a,{client:c,children:n})},ee=new k.a(W),ne=function(e){var n=e.children;return w().currentUser?n:Object(v.jsx)(P,{})},te=function(){return Object(v.jsx)(x,{appId:"mybankgridview-ahggo",children:Object(v.jsx)(y.a,{instance:ee,children:Object(v.jsx)(ne,{children:Object(v.jsx)(Z,{children:Object(v.jsx)(K,{})})})})})};f.a.render(Object(v.jsx)(l.a.StrictMode,{children:Object(v.jsx)(te,{})}),document.getElementById("root"))}},[[470,1,2]]]);
//# sourceMappingURL=main.68ce26fd.chunk.js.map