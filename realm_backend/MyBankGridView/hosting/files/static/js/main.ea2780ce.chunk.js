(this.webpackJsonpmongodb_realm_grid=this.webpackJsonpmongodb_realm_grid||[]).push([[0],{264:function(e,t,n){},270:function(e,t){},272:function(e,t){},281:function(e,t){},283:function(e,t){},310:function(e,t){},311:function(e,t){},316:function(e,t){},318:function(e,t){},325:function(e,t){},344:function(e,t){},474:function(e,t,n){"use strict";n.r(t);var r,a,c,o=n(1),s=n.n(o),i=n(101),u=n.n(i),l=(n(264),n(9)),d=n.n(l),f=n(22),p=n(19),b=n(18),g=n(60),h=n(14),j=s.a.createContext(),m=function(){var e=s.a.useContext(j);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmAppProvider />");return e},v=function(e){var t=e.appId,n=e.children,r=s.a.useState(new g.a(t)),a=Object(b.a)(r,2),c=a[0],o=a[1];s.a.useEffect((function(){o(new g.a(t))}),[t]);var i=s.a.useState(c.currentUser),u=Object(b.a)(i,2),l=u[0],m=u[1];function v(){return(v=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.b.jwt(t),e.next=3,c.logIn(n);case 3:m(c.currentUser);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.logIn(g.b.google("https://mybankgridview-ahggo.mongodbstitch.com/google_login"));case 2:m(c.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.logIn(t);case 2:m(c.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=c.currentUser)||void 0===t?void 0:t.logOut();case 2:m(c.currentUser);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=Object(f.a)(Object(f.a)({},c),{},{currentUser:l,logIn:function(e){return w.apply(this,arguments)},logInJwt:function(e){return v.apply(this,arguments)},logInGoogle:function(){return O.apply(this,arguments)},logOut:function(){return x.apply(this,arguments)}});return Object(h.jsx)(j.Provider,{value:y,children:n})},O=n(130),w=n(485),x=n(256),y=n(23),k=n(73),I=n(244),S=n(109),C=n(167),U=n(129),G=n(5),R=n(164),M=S.a.div(r||(r=Object(k.a)(["\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  background: ",";\n"])),G.a.gray.light2),E=n(253),F=n.n(E);function D(){return Object(h.jsx)(F.a,{size:"15px",margin:"3px",color:G.a.gray.dark2})}var P=function(){var e=m(),t=s.a.useState(""),n=Object(b.a)(t,2),r=n[0],a=n[1],c=s.a.useState(""),o=Object(b.a)(c,2),i=o[0],u=o[1],l=s.a.useState({}),j=Object(b.a)(l,2),v=j[0],w=j[1],x=s.a.useState(!1),y=Object(b.a)(x,2),k=y[0],S=y[1],G=Object(O.b)(),E=G.instance,F=G.accounts,P=function(){var t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),w((function(e){return Object(f.a)(Object(f.a)({},e),{},{password:null})})),t.prev=2,t.next=5,e.logIn(g.b.emailPassword(r,i));case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),L(t.t0,w),S(!1);case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Object(p.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.acquireTokenPopup({scopes:["".concat("ce0096fb-ed00-4e8f-bc85-0ddffffadf6e","/.default")],account:F[0]});case 3:return n=t.sent,t.next=6,JSON.stringify(n.accessToken).slice(1,-1);case 6:return n=t.sent,t.next=9,e.logInJwt(n);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),L(t.t0,w);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.logInGoogle();case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),L(t.t0,w);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),L=function(e,t){var n=function(e){var t,n=e.message.split(":"),r=n[n.length-1].trimStart();if(!r)return{status:"",message:""};var a=Object(I.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),c=r.match(a),o=null!==(t=null===c||void 0===c?void 0:c.groups)&&void 0!==t?t:{},s=o.status,i=o.message;return{status:s,message:i}}(e),r=n.status,a=n.message||r;switch(console.log(a),a){case"invalid username":t((function(e){return Object(f.a)(Object(f.a)({},e),{},{email:"Invalid email address"})}));break;case"invalid username/password":case"invalid password":case"401":t((function(e){return Object(f.a)(Object(f.a)({},e),{},{password:"Incorrect password"})}))}};return Object(h.jsx)(M,{children:k?Object(h.jsx)(D,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(A,{children:Object(h.jsx)(q,{children:"Please identify"})}),Object(h.jsx)(A,{children:Object(h.jsx)(C.a,{type:"email",label:"Email",value:r,onChange:function(e){return a(e.target.value)},errorMessage:v.email,state:v.email?"error":"none"})}),Object(h.jsx)(A,{children:Object(h.jsx)(C.a,{type:"password",label:"Password",value:i,onChange:function(e){return u(e.target.value)},errorMessage:v.password,state:v.password?"error":"none"})}),Object(h.jsx)(A,{children:Object(h.jsx)(U.a,{variant:"primary",onClick:function(){return P()},children:"Login"})}),Object(h.jsx)(A,{children:Object(h.jsx)(R.MicrosoftLoginButton,{onClick:function(){return T()}})}),Object(h.jsx)(A,{children:Object(h.jsx)(R.GoogleLoginButton,{onClick:function(){return N()}})})]})})};var T,q=S.a.h1(a||(a=Object(k.a)(["\n  margin: 0;\n  font-size: 32px;\n"]))),A=S.a.div(c||(c=Object(k.a)(["\n  margin-bottom: 16px;\n"]))),N=function(){return Object(o.useEffect)((function(){Object(g.c)()})),Object(h.jsx)("h1",{children:"Signing in... Please Wait"})},L=n(254),z=(n(471),n(472),n(473),{columnTypes:{detail:{enableRowGroup:!1,enablePivot:!1},dimension:{enableRowGroup:!0,enablePivot:!0},valueColumn:{aggFunc:"sum"}},defaultColDef:{sortable:!0,resizable:!0},rowSelection:"single",rowModelType:"serverSide",serverSideStoreType:"partial",cacheBlockSize:100,rowGroupPanelShow:"always",groupDisplayType:"multipleColumns",onSortChanged:function(e){e.api.refreshServerSideStore({purge:!0})}}),_=n(477),B=function(e){return function(t){return Object(h.jsx)(_.a,{children:function(n){return Object(h.jsx)(e,Object(f.a)({client:n},t))}})}},J=n(488),W=function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e.value)},K=B((function(e){var t,n=e.client,r=m(),a=[{field:"customer",colId:"customerId",valueGetter:"data.customerId",type:"dimension",rowGroup:!0,hide:!0},{field:"lastName",type:"detail"},{field:"firstName",type:"detail"},{field:"age",type:"dimension"},{field:"country",colId:"address.country",type:"dimension",valueGetter:"data.address.country"},{field:"segment",colId:"crmInformation.segmentation",type:"dimension",valueGetter:"data.crmInformation.segmentation"},{field:"account",colId:"accounts.number",valueGetter:"data.accounts.number"},{field:"balance",colId:"accounts.balance",valueGetter:"data.accounts.balance",valueFormatter:W,type:"valueColumn",cellClassRules:{"rag-red":function(e){return e.value<=0},"rag-green":function(e){return e.value>0}}}],c=Object.assign(z,{columnDefs:a}),o=function(e){var t=e.client;return{getRows:function(e){console.log(e);var n=e.request,r=n.startRow,a=n.endRow,c=n.rowGroupCols,o=n.groupKeys,s=n.valueCols,i=n.sortModel;i.map((function(e){return e.sort=e.sort.toUpperCase()}));var u={query:Object(J.a)(T||(T=Object(k.a)(["\n                    query getGridData($queryModelInput:GridQueryModel) {\n                        getGridData(input: $queryModelInput) {\n                            lastRow\n                            rows {\n                                ","\n                            }\n                        }\n                    }\n                }\n                "])),c.length>0&&c.length===o.length?"\n            accounts {\n                number\n                balance\n            ":"\n            customerId\n            lastName\n            firstName\n            age\n            address {\n                country\n            }\n            crmInformation {\n                segmentation\n            }\n            accounts {\n                number\n                balance\n            "),variables:{queryModelInput:{startRow:r,endRow:a,rowGroupCols:c,groupKeys:o,valueCols:s,sortModel:i}}};t.query(u).then((function(e){return e.data.getGridData})).then((function(t){var n=t.lastRow,r=t.rows;e.successCallback(r,n)})).catch((function(t){console.error(t),e.failCallback()}))}}}({client:n}),i=s.a.useState(0),u=Object(b.a)(i,2),l=u[0],d=u[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{style:{height:"calc(100vh - 250px)"},className:"ag-theme-alpine",children:Object(h.jsx)(L.AgGridReact,{gridOptions:c,onGridReady:function(e){e.api.sizeColumnsToFit(),e.api.setServerSideDatasource(o)},onModelUpdated:function(e){d(e.api.getDisplayedRowCount())}})}),Object(h.jsx)("h4",{children:"Total Results: ".concat((t=l,new Intl.NumberFormat("de-DE").format(t)))}),Object(h.jsxs)("h4",{children:["User: ",r.currentUser.id?"".concat(r.currentUser.id," (").concat(r.currentUser.providerType,")"):"not logged in"]}),Object(h.jsx)(U.a,{variant:"primary",onClick:function(){return r.logOut()},children:"Logout"})]})})),Q=n(124),$={auth:{clientId:"ce0096fb-ed00-4e8f-bc85-0ddffffadf6e",authority:"https://login.microsoftonline.com/".concat("6fbb76cd-297f-4298-a09f-bf1180c8f291"),redirectUri:"https://mybankgridview-ahggo.mongodbstitch.com/",postLogoutRedirectUri:"https://mybankgridview-ahggo.mongodbstitch.com/",mainWindowRedirectUri:"https://mybankgridview-ahggo.mongodbstitch.com/"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:function(e,t,n){if(!n)switch(e){case Q.a.Error:return void console.error(t);case Q.a.Info:return void console.info(t);case Q.a.Verbose:return void console.debug(t);case Q.a.Warning:return void console.warn(t)}}}}},V=n(487),Y=n(489),H=n(486),X=n(484),Z=function(e){var t=new V.a({uri:"https://eu-central-1.aws.realm.mongodb.com/api/client/v2.0/app/".concat(e.id,"/graphql"),fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var t=Object(p.a)(d.a.mark((function t(n,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentUser){t.next=2;break}throw new Error("Must be logged in to use the GraphQL API");case 2:return t.next=4,e.currentUser.refreshCustomData();case 4:return console.log(e.currentUser),r.headers.Authorization="Bearer ".concat(e.currentUser.accessToken),t.abrupt("return",fetch(n,r));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}),n=new Y.a;return new H.a({link:t,cache:n})},ee=function(e){var t=e.children,n=m(),r=s.a.useState(Z(n)),a=Object(b.a)(r,2),c=a[0],o=a[1];return s.a.useEffect((function(){o(Z(n))}),[n]),Object(h.jsx)(X.a,{client:c,children:t})},te=new w.a($),ne=function(e){var t=e.children;return m().currentUser?t:Object(h.jsx)(P,{})},re=function(){return Object(h.jsx)(v,{appId:"mybankgridview-ahggo",children:Object(h.jsx)(O.a,{instance:te,children:Object(h.jsx)(x.a,{children:Object(h.jsxs)(y.c,{children:[Object(h.jsx)(y.a,{path:"/google_login",element:Object(h.jsx)(N,{})}),Object(h.jsx)(y.a,{path:"/",element:Object(h.jsx)(ne,{children:Object(h.jsx)(ee,{children:Object(h.jsx)(K,{})})})})]})})})})};u.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(re,{})}),document.getElementById("root"))}},[[474,1,2]]]);
//# sourceMappingURL=main.ea2780ce.chunk.js.map